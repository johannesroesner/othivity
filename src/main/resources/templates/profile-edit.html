<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:data-theme="${currentThemeName}">
<head th:insert="~{layout/head :: head(#{profileDetail.pageTitle})}"></head>
<body class="flex flex-col min-h-screen">
<nav th:insert="~{layout/nav :: nav(activeTab='profiles')}"></nav>
<div class="container mx-auto px-6 py-8 grow">
    <!-- content start -->

    <div class="flex items-center mb-6 space-x-2">
        <a th:href="@{/profile/{username}(username=${profile.username})}" class="btn btn-ghost btn-xl">‚Üê</a>
        <h1 class="text-3xl font-bold" th:text="#{profileDetail.pageTitle}"></h1>
    </div>

    <form th:action="@{/profile/edit/{username}(username=${profile.username})}" method="post" enctype="multipart/form-data" th:object="${profileDto}">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <div class="flex flex-col items-center lg:col-span-1">
                <div class="mb-4">
                    <div class="avatar">
                        <div class="w-100 rounded-full bg-base-200 flex items-center justify-center shadow-2xl">
                            <img th:if="${profile.image != null}" th:src="@{${profile.image.url}}" class="object-cover w-full h-full rounded-full" />
                            <span th:if="${profile.image == null}" class="text-3xl font-semibold text-base-content/60" th:text="${profile.initials}"></span>
                        </div>
                    </div>
                </div>

                <div class="mt-2">
                    <div th:insert="~{fragments/image-form ::imageForm(required = false,currentImage = ${profile.image},deleteAction = ${profile.image != null ? '/profile/deleteImage/' + profile.username : null})}"></div>
                </div>
            </div>


            <div class="lg:col-span-2">
                <div class="card bg-base-200 shadow-2xl p-8 space-y-8 rounded-2xl">

                    <!-- First Name (Read-only) -->
                    <div class="space-y-1">
                        <p class="text-sm font-semibold text-base-content/70" th:text="#{profileDetail.firstName}"></p>
                        <div class="bg-base-100 p-4 rounded-xl shadow-sm opacity-70">
                            <span class="text-base font-medium" th:text="${profile.firstName}"></span>
                        </div>
                    </div>

                    <!-- Last Name (Read-only) -->
                    <div class="space-y-1">
                        <p class="text-sm font-semibold text-base-content/70" th:text="#{profileDetail.lastName}"></p>
                        <div class="bg-base-100 p-4 rounded-xl shadow-sm opacity-70">
                            <span class="text-base font-medium" th:text="${profile.lastName}"></span>
                        </div>
                    </div>

                    <!-- Username (Read-only) -->
                    <div class="space-y-1">
                        <p class="text-sm font-semibold text-base-content/70" th:text="#{profileDetail.username}"></p>
                        <div class="bg-base-100 p-4 rounded-xl shadow-sm opacity-70">
                            <span class="text-base font-medium" th:text="${profile.username}"></span>
                        </div>
                    </div>

                    <!-- Email (Read-only) -->
                    <div class="space-y-1">
                        <p class="text-sm font-semibold text-base-content/70" th:text="#{profileDetail.email}"></p>
                        <div class="bg-base-100 p-4 rounded-xl shadow-sm opacity-70">
                            <span class="text-base font-medium" th:text="${profile.email.address}"></span>
                        </div>
                    </div>

                    <!-- Phone (Editable) -->
                    <div class="space-y-1">
                        <label class="label"><span class="label-text text-sm font-semibold text-base-content/70" th:text="#{profileDetail.phone}"></span></label>
                        <input type="text" th:field="*{phone.number}" class="input input-bordered w-full" th:classappend="${#fields.hasErrors('phone.number')} ? 'input-error'" />
                        <p th:if="${#fields.hasErrors('phone.number')}" th:errors="*{phone.number}" class="text-error text-xs mt-1"></p>
                    </div>

                    <!-- About Me (Editable) -->
                    <div class="space-y-1">
                        <label class="label"><span class="label-text text-sm font-semibold text-base-content/70" th:text="#{profileDetail.aboutMe}"></span></label>
                        <textarea th:field="*{aboutMe}" class="textarea textarea-bordered w-full h-32"></textarea>
                    </div>

                    <div class="flex justify-end pt-4">
                        <button type="submit" class="btn btn-primary" th:text="#{profileEdit.saveButton}">Save Changes</button>
                    </div>

                </div>
            </div>
        </div>
    </form>
    <!-- content end -->
</div>
<footer th:insert="~{layout/footer :: footer}"></footer>
</body>
</html>
