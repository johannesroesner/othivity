<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="weatherCard(weather)" class="h-full">
    
    <div th:if="${weather == null}" class="card bg-base-200 shadow-2xl h-full flex items-center justify-center p-8 rounded-2xl">
        <div class="text-center opacity-50">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
            </svg>
            <p th:text="#{weather.noData}"></p>
        </div>
    </div>

    <div th:if="${weather != null}" class="card bg-base-200 shadow-2xl p-6 rounded-2xl h-full relative overflow-hidden">
        
        <div class="flex justify-between items-start z-10 relative mb-4">
            <div>
                <div class="flex items-center gap-2">
                    <span class="text-2xl">üå§Ô∏è</span>
                    <h2 class="text-xl font-bold" th:text="#{weather.forecast}"></h2>
                </div>
                <p class="text-sm opacity-60 mt-1" 
                   th:text="${#temporals.format(weather.time, 'dd.MM.yyyy HH:mm')} + ' ' + #{weather.timeSuffix}">
                </p>
            </div>
            
            <div class="badge badge-primary badge-outline" 
                 th:text="${weather.precipitationProb > 0 ? #messages.msg('weather.rainRisk') + ' ' + weather.precipitationProb + '%' : #messages.msg('weather.dry')}">
            </div>
        </div>

        <div class="flex flex-col md:flex-row gap-8 items-center h-full">
            
            <div class="flex flex-col items-center justify-center min-w-[120px]">
                <div class="text-primary" th:switch="${weather.iconName}">
                    <svg th:case="'sun'" xmlns="http://www.w3.org/2000/svg" class="h-20 w-20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                    <svg th:case="'cloud'" xmlns="http://www.w3.org/2000/svg" class="h-20 w-20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" /></svg>
                    <svg th:case="'cloud-rain'" xmlns="http://www.w3.org/2000/svg" class="h-20 w-20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 16.2A4.5 4.5 0 0017.5 8h-1.832c-1.745 0-3.332.962-4.098 2.483a5.002 5.002 0 00-9.52 1.458 5.501 5.501 0 001.385 10.558h15.96a2.5 2.5 0 001.608-4.701zM8 17v4m4-4v4m4-4v4" /></svg>
                    <svg th:case="'snowflake'" xmlns="http://www.w3.org/2000/svg" class="h-20 w-20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                    <svg th:case="'lightning-bolt'" xmlns="http://www.w3.org/2000/svg" class="h-20 w-20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                    <svg th:case="*" xmlns="http://www.w3.org/2000/svg" class="h-20 w-20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                </div>

                <div class="text-5xl font-black mt-2 tracking-tighter">
                    <span th:text="${#numbers.formatDecimal(weather.temperature, 1, 0)}"></span>¬∞
                </div>
                <div class="text-sm font-medium opacity-60">
                    <span th:text="#{weather.feelsLike}"></span> 
                    <span th:text="${#numbers.formatDecimal(weather.feelsLike, 1, 0)}"></span>¬∞
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4 w-full">
                
                <div class="bg-base-100 p-3 rounded-xl flex items-center gap-3 shadow-sm">
                    <div class="text-blue-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.59 4.59A2 2 0 1111 8H2m10.59 11.41A2 2 0 1014 16H2m15.73-8.27A2.5 2.5 0 1119.5 12H2" /></svg>
                    </div>
                    <div>
                        <div class="text-xs opacity-60 uppercase font-bold tracking-wider" th:text="#{weather.wind}"></div>
                        <div class="font-bold whitespace-nowrap"><span th:text="${weather.windSpeed}"></span></div>
                    </div>
                </div>

                <div class="bg-base-100 p-3 rounded-xl flex items-center gap-3 shadow-sm">
                    <div class="text-blue-500">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
                    </div>
                    <div>
                        <div class="text-xs opacity-60 uppercase font-bold tracking-wider" th:text="#{weather.amount}"></div>
                        <div class="font-bold whitespace-nowrap"><span th:text="${weather.precipitation}"></span></div>
                    </div>
                </div>

                <div class="bg-base-100 p-3 rounded-xl flex items-center gap-3 shadow-sm">
                    <div class="text-cyan-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3.5C9.5 6.5 7 9.5 7 13c0 2.8 2.2 5 5 5s5-2.2 5-5c0-3.5-2.5-6.5-5-9.5z" /></svg>
                    </div>
                    <div>
                        <div class="text-xs opacity-60 uppercase font-bold tracking-wider" th:text="#{weather.humidity}"></div>
                        <div class="font-bold whitespace-nowrap"><span th:text="${weather.humidity}"></span> %</div>
                    </div>
                </div>

                <div class="bg-base-100 p-3 rounded-xl flex items-center gap-3 shadow-sm">
                    <div class="text-gray-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" /></svg>
                    </div>
                    <div>
                        <div class="text-xs opacity-60 uppercase font-bold tracking-wider" th:text="#{weather.clouds}"></div>
                        <div class="font-bold whitespace-nowrap"><span th:text="${weather.cloudCover}"></span> %</div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

</body>
</html>